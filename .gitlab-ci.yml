stages:
  - Static Analysis
  - Test
 

# Static Analysis Stage
eslint:
  stage: Static Analysis
  image: node:20-slim
  variables:
    AUTH0_DOMAIN: $AUTH0_DOMAIN
    AUTHO_CLIENT_ID: $AUTHO_CLIENT_ID
    AUTHO_CLIENT_SECRET: $AUTHO_CLIENT_SECRET
    API_IDENTIFIER: $API_IDENTIFIER
  script:
    - npm install
    - npx eslint .
  allow_failure: false 
  only:
    - main

# Test Stage
mock-integration-tests:
  stage: Test
  image: node:20-slim
  script:
    - npm install
    - npm run test:coverage
  allow_failure: false 
  only:
    - main